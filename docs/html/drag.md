# Html 拖放API

h5新增了元素拖放的API，利用这个API可以实现一些有趣的效果，比如模拟拖拽到垃圾桶的效果。

## API上手

要实现拖放，就得准备两个容器，一个被拖动，一个允许接受拖动。

1. 可以被拖动的元素：
设置draggable为true: 
```html
<div draggable="true"></div>
```
设置了draggable之后，使用鼠标按住元素拖动就有效果了，但是拖动之后鼠标图标是一个禁用的图标，这是因为需要一个容器来接收被拖动的元素。

拖动期间被拖拽元素会触发一系列事件：
- ondragstart 开始拖拽
- ondrag 拖拽移动中，持续触发，建议防抖（和鼠标移动不一样，只要被脱离原位置，鼠标不移动也会一直触发）
- ondragend 拖拽结束

2. 允许接受被拖动的元素：

接收的元素不需要设置属性，只需要实现 `ondragover` 事件，并阻止默认事件触发即可：
```html
<div ondragover="allowDrop()"></div>
```

```js
function allowDrop(ev) {
    ev.preventDefault();
}
```

完成这一步后，把元素拖动到div时，鼠标图标不再是禁用状态，这就表示这个元素允许接收拖动了，然后我们可以在这个div上实现其他事件，以获取拖动进来的元素：

可实现事件：
- ondragenter 拖动的元素进入容器时触发，进入时触发一次
- ondragleave 拖动的元素离开容器时触发，离开时触发一次
- ondragover 拖动的元素位于容器上方时，只要位于上方就会不断触发
- ondrop 拖动元素被拖动到容器，并放手时，即拖动结束

## 兼容性
在PC上主流浏览器都支持该特性（Internet Explorer 9+），有个特殊的Safari 5.1.2版本不支持，这种特例一般不考虑

但是在移动端上是不支持的，所以在目前的移动优先的网站制作趋势中，除了独立PC网站和后台管理网站后，其他网站都不适用这个API。